webpackJsonp([6],{"./app/components/FieldGroup/index.js":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r),a=n("./node_modules/prop-types/index.js"),i=(n.n(a),n("./node_modules/react-bootstrap/es/index.js")),u=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,r,o){var a=t&&t.defaultProps,i=arguments.length-3;if(n||0===i||(n={}),n&&a)for(var u in a)void 0===n[u]&&(n[u]=a[u]);else n||(n=a||{});if(1===i)n.children=o;else if(i>1){for(var s=Array(i),l=0;l<i;l++)s[l]=arguments[l+3];n.children=s}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),s=function(e){return u(i.FormGroup,{controlId:e.id},void 0,u(i.ControlLabel,{},void 0,e.label),o.a.createElement(i.FormControl,e),e.help&&u(i.HelpBlock,{},void 0,e.help))};t.a=s},"./app/containers/ProfilePage/index.js":function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments[1];switch(t.type){case T:return e;case D:return e.set("fields",Object(I.fromJS)(t.fields));default:return e}}function o(){return{type:T}}function a(e){return{type:Q,data:e}}function i(e){return{type:D,fields:e}}function u(e){return{type:B,errors:e}}function s(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(H.a)(J.a.patch,"/users.json",e.data);case 3:return t.next=5,Object(H.c)(Object(G.push)("/"));case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),t.next=11,Object(H.c)(u(t.t0));case 11:case"end":return t.stop()}},M,this,[[0,7]])}function l(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(H.a)(J.a.get,"/studies/fields");case 2:return e=t.sent,t.next=5,Object(H.c)(i(e.data));case 5:case"end":return t.stop()}},$,this)}function c(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.a)(l);case 2:return e.next=4,Object(H.f)(Q,s);case 4:case"end":return e.stop()}},V,this)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function m(e){return{actions:Object(x.b)(g,e)}}Object.defineProperty(t,"__esModule",{value:!0});var g={};n.d(g,"defaultAction",function(){return o}),n.d(g,"submitProfile",function(){return a}),n.d(g,"populateColumnPickerAction",function(){return i}),n.d(g,"submitProfileErrorsAction",function(){return u});var b=n("./node_modules/lodash/lodash.js"),y=n.n(b),v=n("./node_modules/react/index.js"),_=n.n(v),C=(n("./node_modules/prop-types/index.js"),n("./node_modules/styled-components/dist/styled-components.browser.es.js")),j=n("./node_modules/react-redux/es/index.js"),P=n("./node_modules/react-helmet/lib/Helmet.js"),k=n("./node_modules/reselect/es/index.js"),x=n("./node_modules/redux/es/index.js"),O=n("./node_modules/react-bootstrap/es/index.js"),S=n("./app/components/FieldGroup/index.js"),w=n("./app/components/SearchFieldName/index.js"),N=n("./app/utils/injectSaga.js"),F=n("./app/utils/injectReducer.js"),E=n("./app/containers/AuthHeader/selectors.js"),R=function(e){return e.get("profilePage")},A=function(){return Object(k.a)(R,function(e){return e.toJS()})},L=A,I=n("./node_modules/immutable/dist/immutable.js"),T="app/ProfilePage/DEFAULT_ACTION",Q="app/ProfilePage/SUBMIT_PROFILE_ACTION",D="app/ProfilePage/POPULATE_COLUMN_PICKER_ACTION",B="app/ProfilePage/SUBMIT_PROFILE_ERRORS_ACTION",U=Object(I.fromJS)({fields:[]}),q=r,G=n("./node_modules/react-router-redux/index.js"),H=n("./node_modules/redux-saga/es/effects.js"),J=n("./app/utils/client.js"),M=regeneratorRuntime.mark(s),$=regeneratorRuntime.mark(l),V=regeneratorRuntime.mark(c);n.d(t,"ProfilePage",function(){return ee});var W=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,r,o){var a=t&&t.defaultProps,i=arguments.length-3;if(n||0===i||(n={}),n&&a)for(var u in a)void 0===n[u]&&(n[u]=a[u]);else n||(n=a||{});if(1===i)n.children=o;else if(i>1){for(var s=Array(i),l=0;l<i;l++)s[l]=arguments[l+3];n.children=s}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),z=C.default.div.withConfig({displayName:"ProfilePage__ColumnPickerWrapper"})([".checkbox-inline {margin-left: 5px;}"]),X=W("h1",{},void 0,"Not logged in!"),Z=W(O.Button,{type:"submit",id:"submit-profile-form"},void 0,"Submit"),ee=function(e){function t(e){f(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.firstName=n.props.authheader.user.first_name,n.lastName=n.props.authheader.user.last_name,n.defaultQueryString=n.props.authheader.user.default_query_string,n.currentPassword=null,n.onProfileSubmit=n.onProfileSubmit.bind(n),n.onChangeFirstName=n.onChangeFirstName.bind(n),n.onChangeLastName=n.onChangeLastName.bind(n),n.onChangeDefaultQueryString=n.onChangeDefaultQueryString.bind(n),n.toggleColumnPicker=n.toggleColumnPicker.bind(n),n.onCheckboxChanged=n.onCheckboxChanged.bind(n);var r={};return y.a.get(n.props,"authheader.user.search_result_columns")?y.a.forEach(y.a.get(n.props,"authheader.user.search_result_columns"),function(e){r[e]=1}):r={nct_id:1,brief_title:1,average_rating:1,completion_date:1,overall_status:1},n.state={showColumnPicker:!1,selectedColumns:r},n}return h(t,e),K(t,[{key:"onCheckboxChanged",value:function(e){this.setState({selectedColumns:Y({},this.state.selectedColumns,d({},e,this.state.selectedColumns[e]?0:1))})}},{key:"onChangeFirstName",value:function(e){this.firstName=e.target.value}},{key:"onChangeLastName",value:function(e){this.lastName=e.target.value}},{key:"onChangeDefaultQueryString",value:function(e){this.defaultQueryString=e.target.value}},{key:"onProfileSubmit",value:function(e){e.persist(),e.preventDefault(),this.props.actions.submitProfile({id:this.props.authheader.user.id,first_name:this.firstName,last_name:this.lastName,default_query_string:this.defaultQueryString,search_result_columns:y.a.pickBy(this.state.selectedColumns,function(e){return 1===e})})}},{key:"toggleColumnPicker",value:function(){this.setState({showColumnPicker:!this.state.showColumnPicker})}},{key:"renderColumnPicker",value:function(){var e=this;if(!this.props.profilepage.fields)return null;var t=null;if(this.state.showColumnPicker){var n=this.props.profilepage.fields.map(function(t){return W(O.Checkbox,{id:"checkbox-"+t,inline:!0,onChange:function(){return e.onCheckboxChanged(t)},checked:1===e.state.selectedColumns[t]},t,W(w.default,{field:t}))});t=W(O.Well,{id:"column-picker"},void 0,W(O.FormGroup,{},void 0,n))}return W(z,{},void 0,W(O.Button,{id:"toggle-column-picker",type:"button",onClick:this.toggleColumnPicker},void 0,"Select Search Columns"),t)}},{key:"render",value:function(){return y.a.get(this.props,"authheader.user.loggedIn")?W("div",{},void 0,W(P.Helmet,{title:"Profile",meta:[{name:"description",content:"Profile Page"}]}),W(O.Row,{},void 0,W(O.Col,{md:6,mdOffset:4},void 0,W(O.Form,{onSubmit:this.onProfileSubmit},void 0,W(S.a,{id:"first_name",type:"text",label:"First Name",placeholder:"Enter Your First Name",defaultValue:this.props.authheader.user.first_name,onChange:this.onChangeFirstName}),W(S.a,{id:"last_name",type:"text",label:"Last Name",placeholder:"Enter Your Last Name",defaultValue:this.props.authheader.user.last_name,onChange:this.onChangeLastName}),W(S.a,{id:"default_query_string",type:"text",label:"Default Query",defaultValue:this.props.authheader.user.default_query_string,onChange:this.onChangeDefaultQueryString,placeholder:"Enter A Default Query"}),Z)))):X}}]),t}(_.a.Component),te=Object(k.b)({profilepage:L(),authheader:Object(E.a)()}),ne=Object(j.b)(te,m),re=Object(F.a)({key:"profilePage",reducer:q}),oe=Object(N.a)({key:"profilePage",saga:c});t.default=Object(x.c)(re,oe,ne)(ee)}});